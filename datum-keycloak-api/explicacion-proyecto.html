<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datum Keycloak API - ExplicaciÃ³n del Proyecto</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 40px;
        }

        h2 {
            color: #2a5298;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            color: #1e3c72;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        p {
            color: #333;
            margin-bottom: 15px;
            text-align: justify;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 10px;
            color: #444;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tech-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s;
        }

        .tech-card:hover {
            transform: translateY(-5px);
        }

        .tech-card h4 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .endpoint-box {
            background: #f5f5f5;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .endpoint-box code {
            background: #2a5298;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        .feature-list {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .highlight {
            background: #fff3cd;
            padding: 20px;
            border-left: 5px solid #ffc107;
            border-radius: 5px;
            margin: 20px 0;
        }

        footer {
            background: #1e3c72;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
        }

        .architecture-diagram {
            background: white;
            border: 2px solid #667eea;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .tech-stack {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ” Datum Keycloak API</h1>
            <p>API de AutenticaciÃ³n y AutorizaciÃ³n con Keycloak</p>
        </header>

        <div class="content">
            <section id="descripcion">
                <h2>ğŸ“‹ DescripciÃ³n del Proyecto</h2>
                <p>
                    <strong>Datum Keycloak API</strong> es una API REST desarrollada con Quarkus (framework Java supersÃ³nico y subatÃ³mico)
                    que proporciona servicios de autenticaciÃ³n y autorizaciÃ³n integrÃ¡ndose con Keycloak, un servidor de gestiÃ³n de
                    identidades y accesos de cÃ³digo abierto.
                </p>
                <p>
                    Este proyecto actÃºa como intermediario entre aplicaciones cliente (como aplicaciones web de React) y el servidor
                    de Keycloak, facilitando el proceso de login y gestiÃ³n de tokens de autenticaciÃ³n de manera segura y eficiente.
                </p>
            </section>

            <section id="objetivo">
                <h2>ğŸ¯ Objetivo Principal</h2>
                <div class="highlight">
                    <strong>Objetivo:</strong> Proporcionar un servicio de autenticaciÃ³n centralizado que permita a las aplicaciones
                    cliente autenticar usuarios contra Keycloak y obtener tokens JWT (JSON Web Tokens) para acceder a recursos protegidos.
                </div>
            </section>

            <section id="funcionalidad">
                <h2>âš™ï¸ Â¿QuÃ© Hace Este Proyecto?</h2>

                <h3>Funcionalidades Principales:</h3>
                <div class="feature-list">
                    <ul>
                        <li><strong>AutenticaciÃ³n de Usuarios:</strong> Permite a los usuarios iniciar sesiÃ³n con sus credenciales (usuario y contraseÃ±a).</li>
                        <li><strong>IntegraciÃ³n con Keycloak:</strong> Se comunica con el servidor Keycloak para validar credenciales y obtener tokens.</li>
                        <li><strong>GestiÃ³n de Tokens JWT:</strong> Maneja tokens de acceso y tokens de actualizaciÃ³n (refresh tokens).</li>
                        <li><strong>ExtracciÃ³n de InformaciÃ³n de Usuario:</strong> Obtiene y devuelve informaciÃ³n bÃ¡sica del usuario autenticado.</li>
                        <li><strong>Manejo de Respuestas:</strong> Proporciona respuestas estructuradas tanto para casos de Ã©xito como de error.</li>
                    </ul>
                </div>

                <h3>Endpoints Disponibles:</h3>

                <div class="endpoint-box">
                    <strong>POST</strong> <code>/auth/login</code>
                    <p style="margin-top: 10px;">
                        <strong>FunciÃ³n:</strong> Autenticar usuarios con Keycloak.<br>
                        <strong>Entrada:</strong> JSON con username y password<br>
                        <strong>Salida:</strong> Token de acceso, refresh token, informaciÃ³n del usuario
                    </p>
                </div>

                <div class="endpoint-box">
                    <strong>GET</strong> <code>/auth/hello</code>
                    <p style="margin-top: 10px;">
                        <strong>FunciÃ³n:</strong> Endpoint de prueba que devuelve "Hello, world!"<br>
                        <strong>Uso:</strong> Verificar que el servicio estÃ¡ funcionando
                    </p>
                </div>
            </section>

            <section id="arquitectura">
                <h2>ğŸ—ï¸ Arquitectura del Sistema</h2>

                <div class="architecture-diagram">
                    <pre style="text-align: left; font-family: monospace; color: #2a5298;">
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Cliente Web    â”‚
    â”‚  (React App)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HTTP Request
             â”‚ (username/password)
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Datum Keycloak     â”‚
    â”‚      API            â”‚
    â”‚   (Quarkus)         â”‚
    â”‚                     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚AuthResource â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚         â”‚           â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â†“â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚KeycloakClientâ”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ OIDC Protocol
               â”‚ (OpenID Connect)
               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Keycloak Server   â”‚
    â”‚  (Identity Provider)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </pre>
                </div>

                <h3>Flujo de AutenticaciÃ³n:</h3>
                <ol>
                    <li>El usuario envÃ­a sus credenciales (username/password) al endpoint <code>/auth/login</code></li>
                    <li>La API recibe la peticiÃ³n en <code>AuthResource</code></li>
                    <li><code>KeycloakClient</code> se comunica con el servidor Keycloak usando el protocolo OpenID Connect</li>
                    <li>Keycloak valida las credenciales y devuelve tokens JWT si son correctas</li>
                    <li>La API extrae informaciÃ³n del usuario del token</li>
                    <li>Se construye una respuesta <code>AuthResponse</code> con:
                        <ul>
                            <li>Token de acceso (access_token)</li>
                            <li>Token de actualizaciÃ³n (refresh_token)</li>
                            <li>InformaciÃ³n del usuario (UserInfo)</li>
                            <li>Tiempo de expiraciÃ³n</li>
                        </ul>
                    </li>
                    <li>La respuesta se envÃ­a de vuelta al cliente</li>
                </ol>
            </section>

            <section id="tecnologias">
                <h2>ğŸ› ï¸ TecnologÃ­as Utilizadas</h2>

                <div class="tech-stack">
                    <div class="tech-card">
                        <h4>Java 17</h4>
                        <p>Lenguaje de programaciÃ³n base</p>
                    </div>
                    <div class="tech-card">
                        <h4>Quarkus 3.28.1</h4>
                        <p>Framework Java supersÃ³nico</p>
                    </div>
                    <div class="tech-card">
                        <h4>Keycloak</h4>
                        <p>Servidor de identidad y acceso</p>
                    </div>
                    <div class="tech-card">
                        <h4>OIDC</h4>
                        <p>Protocolo OpenID Connect</p>
                    </div>
                    <div class="tech-card">
                        <h4>REST</h4>
                        <p>API RESTful con Jackson</p>
                    </div>
                    <div class="tech-card">
                        <h4>Maven</h4>
                        <p>GestiÃ³n de dependencias</p>
                    </div>
                    <div class="tech-card">
                        <h4>Reactive</h4>
                        <p>ProgramaciÃ³n reactiva con Mutiny</p>
                    </div>
                    <div class="tech-card">
                        <h4>JWT</h4>
                        <p>JSON Web Tokens</p>
                    </div>
                </div>
            </section>

            <section id="componentes">
                <h2>ğŸ“¦ Componentes Principales</h2>

                <h3>1. AuthResource</h3>
                <p>
                    Controlador REST que expone los endpoints de autenticaciÃ³n. Maneja las peticiones HTTP y coordina
                    la comunicaciÃ³n con Keycloak a travÃ©s del cliente REST.
                </p>

                <h3>2. KeycloakClient</h3>
                <p>
                    Cliente REST reactivo que se comunica con el servidor Keycloak. Utiliza el protocolo OpenID Connect
                    para obtener tokens de autenticaciÃ³n.
                </p>

                <h3>3. LoginRequest</h3>
                <p>
                    Modelo de datos que representa la peticiÃ³n de login (contiene username y password).
                </p>

                <h3>4. AuthResponse</h3>
                <p>
                    Modelo de respuesta que incluye el resultado de la autenticaciÃ³n, tokens y informaciÃ³n del usuario.
                </p>

                <h3>5. TokenResponse</h3>
                <p>
                    Modelo que representa la respuesta de Keycloak con los tokens JWT.
                </p>

                <h3>6. UserInfo</h3>
                <p>
                    Modelo que contiene informaciÃ³n del usuario autenticado (id, username, email, roles).
                </p>
            </section>

            <section id="ventajas">
                <h2>âœ¨ Ventajas del Proyecto</h2>
                <ul>
                    <li><strong>Alto Rendimiento:</strong> Quarkus ofrece tiempos de arranque ultrarrÃ¡pidos y bajo consumo de memoria</li>
                    <li><strong>ProgramaciÃ³n Reactiva:</strong> Uso de Mutiny para operaciones no bloqueantes y mejor escalabilidad</li>
                    <li><strong>Seguridad:</strong> IntegraciÃ³n con Keycloak, un sistema de autenticaciÃ³n robusto y probado</li>
                    <li><strong>EstÃ¡ndar de Industria:</strong> ImplementaciÃ³n de OpenID Connect y OAuth 2.0</li>
                    <li><strong>Desarrollo RÃ¡pido:</strong> Hot reload en modo desarrollo para mayor productividad</li>
                    <li><strong>Cloud Native:</strong> Optimizado para entornos de contenedores y Kubernetes</li>
                    <li><strong>Mantenible:</strong> CÃ³digo limpio y bien estructurado con separaciÃ³n de responsabilidades</li>
                </ul>
            </section>

            <section id="uso">
                <h2>ğŸš€ CÃ³mo Usar el Proyecto</h2>

                <h3>Modo Desarrollo:</h3>
                <div class="endpoint-box">
                    <code>./mvnw quarkus:dev</code>
                    <p style="margin-top: 10px;">Inicia la aplicaciÃ³n en modo desarrollo con live reload</p>
                </div>

                <h3>Empaquetar AplicaciÃ³n:</h3>
                <div class="endpoint-box">
                    <code>./mvnw package</code>
                    <p style="margin-top: 10px;">Genera un JAR ejecutable</p>
                </div>

                <h3>Ejecutar AplicaciÃ³n:</h3>
                <div class="endpoint-box">
                    <code>java -jar target/quarkus-app/quarkus-run.jar</code>
                    <p style="margin-top: 10px;">Ejecuta la aplicaciÃ³n empaquetada</p>
                </div>

                <h3>Ejemplo de PeticiÃ³n de Login:</h3>
                <div class="endpoint-box">
                    <pre style="margin-top: 10px; overflow-x: auto;">
POST http://localhost:8080/auth/login
Content-Type: application/json

{
  "username": "usuario",
  "password": "contraseÃ±a"
}
                    </pre>
                </div>

                <h3>Ejemplo de Respuesta Exitosa:</h3>
                <div class="endpoint-box">
                    <pre style="margin-top: 10px; overflow-x: auto;">
{
  "success": true,
  "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cC...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cC...",
  "tokenType": "Bearer",
  "expiresIn": 300,
  "userInfo": {
    "id": "user_123456",
    "username": "usuario",
    "email": "usuario@example.com",
    "roles": ["basic", "user"]
  }
}
                    </pre>
                </div>
            </section>

            <section id="casos-uso">
                <h2>ğŸ’¼ Casos de Uso</h2>
                <ul>
                    <li><strong>Aplicaciones Web:</strong> AutenticaciÃ³n de usuarios en aplicaciones React, Angular, Vue.js</li>
                    <li><strong>Aplicaciones MÃ³viles:</strong> Sistema de login para apps iOS/Android</li>
                    <li><strong>Microservicios:</strong> Servicio centralizado de autenticaciÃ³n en arquitecturas de microservicios</li>
                    <li><strong>Single Sign-On (SSO):</strong> Inicio de sesiÃ³n Ãºnico para mÃºltiples aplicaciones</li>
                    <li><strong>APIs Protegidas:</strong> Control de acceso a recursos mediante tokens JWT</li>
                </ul>
            </section>

            <section id="seguridad">
                <h2>ğŸ”’ Aspectos de Seguridad</h2>
                <ul>
                    <li>Uso de tokens JWT para autenticaciÃ³n stateless</li>
                    <li>IntegraciÃ³n con Keycloak para gestiÃ³n centralizada de identidades</li>
                    <li>ImplementaciÃ³n del protocolo OpenID Connect (OIDC)</li>
                    <li>Refresh tokens para renovaciÃ³n segura de sesiones</li>
                    <li>Manejo seguro de credenciales (nunca se almacenan en la API)</li>
                    <li>Respuestas de error que no revelan informaciÃ³n sensible</li>
                </ul>
            </section>
        </div>

        <footer>
            <p>Datum Keycloak API - Desarrollado con Quarkus Framework</p>
            <p style="margin-top: 10px;">ğŸš€ Supersonic Subatomic Java | ğŸ” Seguridad y AutenticaciÃ³n</p>
        </footer>
    </div>
</body>
</html>
